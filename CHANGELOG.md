# Changelog

一些主要的变动放在这里，单纯做个更新记录，是之前的练手项目 [freader(已放弃)](https://github.com/Sanotsu/freader)的衍生。

## 版本说明

### v0.4.0-beta.1

- feat: 添加了恐龙快跑小游戏；
- feat: 添加了贪吃蛇小游戏；
- feat: 添加了扫雷小游戏；
- feat: 添加了数独小游戏。

### v0.3.0-beta.1

- feat: 添加 2048 小游戏；
- feat: 添加俄罗斯方块小游戏；
- docs: 更新 readme 文档为最新版本。

###　 v0.2.2-beta.1

- feat:
  - 将媒体资源模块拆分为“本地视频”和“本地图片”，可分文件夹预览所有的视频或图片资源。
  - 添加了媒体资源整合管理的“全部资源”模块，可条件查询、分类型展示。图片、视频、音频点击后调用各自播放器播放或预览。
  - 添加了视频播放时左边上下滑动屏幕调整应用内亮度、右边上下滑动屏幕调整系统音量的功能。可原分辨率和全屏播放视频。
- deprecated:
  - 因为实测 `photo_namager` 中`PhotoManager.getAssetPathList()`条件查询时，使用 `AdvancedCustomFilter/ CustomFilter` 的 filter 和 type 中指定`RequestType`不能同时生效(始终是全部类型的资源)，所以“本地视频”和“本地图片”默认显示所有，不可筛选（“全部资源”模块可以，因为是构建的 sql 查询带上来 mediaType）。
  - 因为对文件操作的安全性要求越来越严格，不再继续添加对媒体文件的异动操作(比如重命名、复制、删除等)
- fix:
  - 修复了一些小 bug。
- perf:
  - 清除大量无用的测试、打印等代码，清理一些原本预留的功能但后续不做的模块。
- bonus:
  - 添加长按退出弹窗的正文，可切换底部导航栏显示的数量(可隐藏“本地图片”和“本地视频”模块，因为功能基本和“全部资源重复”)。
- warning:
  - 实测，使用 Windows7 系统自带的演示范例视频`Wildlife.wmv`会有很多问题：
    - 这个`photo_manager`库基本无法正常解析(可以判断出是个视频，但无法生成缩略图，无法识别出视频长度等等内容，还会输出一堆报错)；
    - 因此直接`AssetEntity`获取的`file`也就无法使用`video_player`进行正常播放了。
  - 没有测试过视频分辨率大于设备分辨率的视频播放。
  - 在 Nubia Z50 Ultra (分辨率 `2480 * 1116`)、xiaomi 6(分辨率 `1920 * 1080`)下进行实机测试，app 正常使用。
    - 但是如果是`flutter run -v`运行本项目，前者在 Android 13 时正常，升级到 Android 14 后，运行项目会卡住在 `Waiting for VM Service port to be available...`，目前还没有搜索到类似出现的原因。
  - “本地音乐”模块在退出后重新打开 app 保留上次播放的列表和音乐时，第一次或者第二次时不对，多几次后面是正常的，原因不明，不是很影响使用，后续有空再继续查看。

### v0.2.1-beta.1

根据提交记录先后:

- refactor:之前示例的用户中心简化成抽屉;清除关于主题切换的所有逻辑,后续再添加；
- fix:修正上下一曲时为更新记录当前音乐缓存的问题；
- fix: 修正每次打开 app 当前播放音乐是固定而不是上次退出时的音乐；
- fix: 使用 GetStorage 代替 SharedPreferences 缓存当前播放音乐歌单和编号等信息；
- perf: 基本简单优化了‘本地音乐’模块的所有内容，清除大量无意义的 print，修复部分细节布局和小问题；
- feat: 后台播放时，状态栏基本可以显示音频缩略图了；
- fix: 修正 Android13 访问内部存储处理方式不正确的问题;修正音频播放详情页面的一些细节;删除无意义的 drawer；
- chore:升级使用的 flutter 环境为 3.16.7，相关组件库依赖也升级为可用的最新。

### v0.2.0-beta

- feat:完成音频播放、图片浏览、视频观看的基本功能。

### v0.1.0-beta

- feat:可以播放本地音频，按照歌单、全部、歌手、专辑的 tab 区分。

## 更新日志

### 2024-10-30 主要更新

- fix: 添加了对解析异常的音频的过滤处理。
- 比如酷狗封装的 `xxx.kgm.flac`，会被识别成音频但实际无法播放。

### 2024-10-29 主要更新

- fix: 修复第一次使用应用，在设备中有大量音频(比如成千上万)时，初始化导入很慢的问题；
- fix: 安卓 14 后台播放时通知栏不显示当前播放音频的问题；
- feat: 在播放详情页面添加了播放列表底部弹窗;主题启用了 Material3。

### 2024-10-26 主要更新

- chore: 升级了 flutter 版本到 3.24.4，更新项目相关依赖的版本为当前最新。

### 2024-02-01 主要更新

- feat:添加了扫雷小游戏
  - 更多参看对应模块的 [readme](lib/views/game_center/minesweeper/readme.md) 。

### 2024-01-31 主要更新

- feat:添加了恐龙快跑小游戏
  - 更多参看对应模块的 [readme](lib/views/game_center/t-rex_dinosaur/readme.md) 。
- feat:添加了贪吃蛇小游戏
  - 更多参看对应模块的 [readme](lib/views/game_center/snake/readme.md) 。

### 2024-01-30 主要更新

- feat:添加了俄罗斯方块小游戏
  - 更多参看对应模块的 [readme](lib/views/game_center/tetris/readme.md) 。

### 2024-01-29 主要更新

- feat:添加了 2048 小游戏
  - 更多参看对应模块的 [readme](lib/views/game_center/flutter_2048/readme.md) 。
  - 添加了休闲游戏模块后，原本的“本地图片”和“本地视频”模块就初始默认隐藏，同样长按退出弹窗正文可切换。

### 2024-01-26 主要更新

- feat:
  - 将媒体资源模块拆分为“本地视频”和“本地图片”，可分文件夹预览所有的视频或图片资源。
  - 添加了媒体资源整合管理的“全部资源”模块，可条件查询、分类型展示。图片、视频、音频点击后调用各自播放器播放或预览。
  - 添加了视频播放时左边上下滑动屏幕调整应用内亮度、右边上下滑动屏幕调整系统音量的功能。可原分辨率和全屏播放视频。
- deprecated:
  - 因为实测 `photo_namager` 中`PhotoManager.getAssetPathList()`条件查询时，使用 `AdvancedCustomFilter/ CustomFilter` 的 filter 和 type 中指定`RequestType`不能同时生效(始终是全部类型的资源)，所以“本地视频”和“本地图片”默认显示所有，不可筛选。
  - 因为对文件操作的安全性要求越来越严格，不再继续添加对媒体文件的异动操作(比如重命名、复制、删除等)
- fix:修复了一些小 bug。
- perf:清除大量无用的测试、打印等代码，清理一些原本预留的功能但后续不做的模块。
- bonus:添加长按退出弹窗的正文，可切换底部导航栏显示的数量(可隐藏“本地图片”和“本地视频”模块，因为功能基本和“全部资源重复”)。
- warning:
  - 实测，使用 Windows7 系统自带的演示范例视频`Wildlife.wmv`会有很多问题：
    - 这个`photo_manager`库基本无法正常解析(可以判断出是个视频，但无法生成缩略图，无法识别出视频长度等等内容，还会输出一堆报错)；
    - 因此直接`AssetEntity`获取的`file`也就无法使用`video_player`进行正常播放了。
  - 没有测试过视频分辨率大于设备分辨率的视频播放。
  - 在 Nubia Z50 Ultra (分辨率 `2480 * 1116`)、xiaomi6(分辨率 `1920 * 1080`)下进行实机测试，app 正常使用。
    - 但是如果是`flutter run -v`运行本项目，前者在 Android 13 时正常，升级到 Android 14 后，运行项目会卡住在 `Waiting for VM Service port to be available...`，目前还没有搜索到类似出现的原因。
  - “本地音乐”模块在退出后重新打开 app 保留上次播放的列表和音乐时，第一次或者第二次时不对，多几次后面是正常的，原因不明，不是很影响使用，后续有空再继续查看。

### 2024-01-12 主要更新

- 添加了后台播放时通知栏可显示音频缩略图；
- 修正了记录上次播放歌单和歌曲功能未生效的问题；
- 简单重构了本地音乐模块，清除大量无用和无意义的输出、预留功能等代码；
- 升级 flutter 环境为 3.16.7，相关组件库依赖也升级为可用的最新版本；
- 在 Nubia Z50 Ultra 下进行实机测试(Android 13 , 分辨率 `2480 * 1116` )。
